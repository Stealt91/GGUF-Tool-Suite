## Quant mix recipe created using Thireus' GGUF Tool Suite - https://gguf.thireus.com/
# Model name: Qwen3-4B-Instruct-2507
# Link to the original model: https://huggingface.co/Qwen/Qwen3-4B-Instruct-2507

## Model head & embeddings — qbits: 32 5 
output_norm\.weight=f32
token_embd\.weight=q5_0

## Multi-headed attention parameters — qbits: 32 3 
blk\.([0-9]|[1-2][0-9]|3[0-5])\.attn_k\.weight=iq3_kt
blk\.([0-9]|[1-2][0-9]|3[0-5])\.attn_output\.weight=iq3_kt
blk\.([0-9]|[1-2][0-9]|3[0-5])\.attn_v\.weight=iq3_kt
blk\.([0-9]|[1-2][0-9]|3[0-5])\.attn_k_norm\.weight=f32
blk\.([0-9]|[1-2][0-9]|3[0-5])\.attn_q\.weight=iq3_kt
blk\.([0-9]|[1-2][0-9]|3[0-5])\.attn_norm\.weight=f32
blk\.([0-9]|[1-2][0-9]|3[0-5])\.attn_q_norm\.weight=f32

## Core FFN weights — qbits: 32 4 3 2 
blk\.([0-3]|[5-8]|11|20|30|2[2-9]|1[3-9])\.ffn_gate\.weight=iq2_kt
blk\.([0-8]|19|29|34|2[0-7]|1[4-6]|1[0-1])\.ffn_up\.weight=iq2_kt
blk\.([0-9]|[1-2][0-9]|3[0-5])\.ffn_norm\.weight=f32
blk\.(0|[4-5]|16|18|22|31|2[4-7]|1[2-3])\.ffn_down\.weight=iq3_kt
blk\.(4|9|10|12|21|3[1-4])\.ffn_gate\.weight=iq3_kt
blk\.35\.ffn_up\.weight=iq4_kt
blk\.(9|28|1[7-8]|1[2-3]|3[0-3])\.ffn_up\.weight=iq3_kt
blk\.([1-3]|[6-8]|10|17|19|23|2[0-1]|1[4-5])\.ffn_down\.weight=iq2_kt
blk\.35\.ffn_gate\.weight=iq4_kt
blk\.(9|11|30|3[2-5]|2[8-9])\.ffn_down\.weight=iq4_kt

## Summary of tensor sizes per class
# GPU Total: 0.593 GiB (100.0%) | 0.59 GiB max, if all were q5_0 | 0.59 GiB min, if all were q5_0
# CPU Total: 0.818 GiB (65.3%) | 1.25 GiB max, if all were iq4_kt | 0.67 GiB min, if all were iq2_kt
# GPU+CPU Total: 1.411 GiB (82.7%)

## Summary of tensor counts and bpw per qtype
#
# GPU-loaded quants:
# QTYPE		Count	BPW	Assigned GiB	% Assigned	Max GiB (all)
# +f32       	145	32.0  	  0.00 GiB	-		-
# q5_0      	1  	5.5   	  0.25 GiB	100.0%		0.25
# +iq3_kt    	144	3.125 	  0.34 GiB	-		-
#
# CPU-loaded quants:
# QTYPE		Count	BPW	Assigned GiB	% Assigned	Max GiB (all)
# iq4_kt    	11 	4.0   	  0.13 GiB	10.2%		1.25
# iq3_kt    	32 	3.125 	  0.29 GiB	29.6%		0.98
# iq2_kt    	65 	2.125 	  0.40 GiB	60.2%		0.67
#
# -Average BPW: 3.0132
#
# -Notes:
# - '+' means user-defined pre-assigned tensors, or tensor missing from csv data or f32 tensors
# - Recipe produced on the 2025-08-26 16:33:26 UTC+0000 using Thireus' GGUF tools (https://gguf.thireus.com/)
# - Script SHA-256: 9888e4b92ee591d5d115f263aea141ed8efb74f3224930195086bc2caeea6eb7
# - Calibration dataset 'ppl_results.csv' SHA-256: ebe2b483e0a4258f3a65806462b6f4f4a3669a70f664d03dbfcb5c4984ea240a
# - tensors.bf16.map SHA-256: 5586a523f4069ca3dbabf3b3db9b7514c239b74bd066c13b2c8039127c3fa0be
# - tensors.bf16.map model name: Qwen3-4B-Instruct-2507-THIREUS-BF16-SPECIAL_TENSOR-00399-of-00399
# - tensors.iq4_kt.map SHA-256: ac235b17b0e9567a9cc7d4b621154b71334b935060d30a97d7623412d135c840
# - tensors.iq4_kt.map model name: Qwen3-4B-Instruct-2507-THIREUS-IQ4_KT-SPECIAL_TENSOR-00399-of-00399
# - tensors.iq3_kt.map SHA-256: 07ca277e74d7bc2b2a3cedb5df1b9f3c6bb4f39639216550621b973a130e4e36
# - tensors.iq3_kt.map model name: Qwen3-4B-Instruct-2507-THIREUS-IQ3_KT-SPECIAL_TENSOR-00399-of-00399
# - tensors.iq2_kt.map SHA-256: a985ab065097bc1955a5bfd219b00bb96dcb8c02478ff6118263a2bbd4d38c10
# - tensors.iq2_kt.map model name: Qwen3-4B-Instruct-2507-THIREUS-IQ2_KT-SPECIAL_TENSOR-00399-of-00399
# - tensors.q5_0.map SHA-256: 1b26efa7be2f42cb53794cf5a74d37f9f5bf126fe74edfc6dacd927f992e9592
# - tensors.q5_0.map model name: Qwen3-4B-Instruct-2507-THIREUS-Q5_0-SPECIAL_TENSOR-00399-of-00399
# - tensors.iq1_kt.map SHA-256: 707e3712cdc31371e9c4fe775c935b5bb61e9aadbefef5d5f04d2ba275353379
# - tensors.iq1_kt.map model name: Qwen3-4B-Instruct-2507-THIREUS-IQ1_KT-SPECIAL_TENSOR-00399-of-00399
# - GPG signatures: PASSED
# - Command used:
# ../../quant_assign.py ppl_results.csv --tolerance 0.01 --cpu-irq-k 1.5 --gpu-irq-k 1.5 --qtype iq1_kt \
# --gpu-assign-qtype iq3_kt --cpu-tensors-max-size 0.82 --gpu-tensors-max-size 95% --exponential-factor 8 \
# --cpu-tensors 'blk\.([0-9]|[1-2][0-9]|3[0-5])\.ffn_down\.weight' 'blk\.([0-9]|[1-2][0-9]|3[0-5])\.ffn_up\.weight' \
# 'blk\.([0-9]|[1-2][0-9]|3[0-5])\.ffn_gate\.weight' --gpu-tensors '.*' --cpu-quants iq4_kt iq3_kt iq2_kt \
# --gpu-quants q5_0 --harmonization-technique 3

## THE END!
